import{e as D,r as B,f as O,l as q,o as s,c,a,w as o,u as i,Z as N,b as d,h as t,t as l,j as h,n as T,g as v,F as y,i as w,O as V,q as j,s as z,Q as L}from"./app-632bf8b8.js";import{d as S}from"./dayjs.min-356b711c.js";import{c as f,_ as E}from"./AuthenticatedLayout-6b95fe5a.js";import{a as P,b as p,_ as C}from"./AppButton-ffc821ac.js";import{_ as Q}from"./AppPagination-44a644fe.js";import{T as _,A}from"./TableTh-6fdd4a53.js";import{d as Y}from"./index-81635579.js";import{a as W}from"./index-4cd942bc.js";import{_ as X}from"./ModalMobileTariffs-3123fdf5.js";import"./Modal-1349d4bc.js";import"./useAxios-d55f63a8.js";import"./TextInput-7865c9b5.js";import"./SelectInput-944e57c4.js";import"./LabelText-36465a88.js";import"./CheckboxInput-967d96fa.js";const Z=r=>(j("data-v-e0e2798c"),r=r(),z(),r),H=Z(()=>t("title",null,"Транзакции",-1)),J={key:0,class:"input-wrapper"},K={key:1,class:"panel mb-6"},U={class:"flex gap-1.5"},ee={class:"ml-auto"},te={href:"/transactions/download",target:"_blank",download:""},se={class:"panel panel_p-lg"},le={class:"text-left"},ae={class:"text-center"},oe={class:"flex flex-col"},ce={class:"text-center"},de={class:"text-center"},ne={class:"text-center"},ie={class:"text-center"},ue={class:"text-center"},re={class:"text-center"},_e={class:"flex flex-col"},pe={class:"text-center"},fe={class:"text-left"},me={class:"text-left p-6"},he={key:0,class:"functionalBlue"},ve={key:1,class:"accentRedtext"},ye={key:2},ke={class:"text-left"},be={class:"text-left"},xe={key:0},ge={key:1},we={class:"text-left"},Se={class:"text-left p-6"},Ce={key:0,class:"accentGreen flex badge"},Ye={key:1,class:"accentRed flex badge"},De={key:2,class:"accentYellow flex badge"},Te={key:3},Ae={class:"mobile-product-card__image"},Me={class:"mobile-product-card__info"},$e={class:"mobile-product-card__info__top"},Ie={class:"product__code product__code__text"},Fe={class:"product__quantity"},Ge={class:"mobile-product-card__info__bottom"},Re={class:"product__actions"},Be={key:0,class:"functionalBlue"},Oe={key:1,class:"accentRedtext"},qe={key:2},Ne={class:"product__status"},Ve={key:0,class:"accentGreen flex badge"},je={key:1,class:"accentRed flex badge"},ze={key:2,class:"accentYellow flex badge"},Le={__name:"Transactions",props:{transactions:{type:Array,required:!0},paginator:{type:Array,default:()=>[]},activeSection:{type:String,required:!0}},setup(r){const M=r,{width:k}=W(),b=D(!1),x=D("Баланс"),G=["balance","refill","debit"];B(M.transactions.reduce((n,u)=>n.includes(u.task_type)?n:[...n,u.task_type],[]));const R=n=>{g(n),b.value=!1},$={"App\\Models\\PurchaseGroup":"Группа выкупов",review:"Отзыв",return_purchase:"Возврат за выкуп",livecargo:"Забор товара",review_reaction:"Реакция на отзыв",return_review:"Возврат за отзыв",return_pickup:"Возврат за забор","App\\Models\\ReviewComplaintGroup":"Жалобы на отзыв","App\\Models\\ReviewReactionGroup":"Реакции на отзыв","App\\Models\\ActionCartGroup":"Действия: добавление в корзину","App\\Models\\ActionSearchGroup":"Действия: поиск по запросам",balance:"Пополнение баланса",balance_manually:"Пополение баланса (поддержка)"},I=(n,u)=>n=="purchase"?"Выкуп #"+u:n=="review"?"Отзыв #"+u:n=="livecargo"?"Забор товара #"+u:n??"Выкуп #"+u;O(()=>{var n;return((n=L().props.auth.user.preferences)==null?void 0:n.paymentChatId)!=null});const F=n=>$[n]?$[n]:"Не определено",m=D(M.activeSection),g=n=>{m.value=n,V.reload({only:["transactions","paginator","activeSection"],data:{section:m.value,page:1}})};return q(()=>m.value,()=>{m.value==="balance"?x.value="Баланс":m.value==="refill"?x.value="Пополнение":x.value="Списание"}),(n,u)=>(s(),c(y,null,[a(i(N),null,{default:o(()=>[H]),_:1}),a(E,null,{header:o(()=>[d("Транзакции")]),default:o(()=>[i(Y)().isDesktop&&i(k)>390?h("",!0):(s(),c("div",J,[t("div",{onClick:u[0]||(u[0]=e=>b.value=!b.value),class:"mobile-section-input"},[t("p",null,l(x.value),1),a(p,{icon:"chevron-down"})])])),i(Y)().isDesktop&&i(k)>390?(s(),c("div",K,[t("div",U,[a(C,{theme:"normal",class:T({btn_selected:r.activeSection=="balance"}),onClick:u[1]||(u[1]=e=>g("balance"))},{default:o(()=>[d(" Все ")]),_:1},8,["class"]),a(C,{theme:"normal",class:T({btn_selected:r.activeSection=="refill"}),onClick:u[2]||(u[2]=e=>g("refill"))},{default:o(()=>[d(" Пополнение ")]),_:1},8,["class"]),a(C,{theme:"normal",class:T({btn_selected:r.activeSection=="debit"}),onClick:u[3]||(u[3]=e=>g("debit"))},{default:o(()=>[d(" Списание ")]),_:1},8,["class"]),t("div",ee,[t("a",te,[a(C,{icon:"file-download"},{default:o(()=>[d("Скачать XLS")]),_:1})])])])])):h("",!0),t("div",se,[r.activeSection=="wallets"?(s(),v(A,{key:0},{head:o(()=>[t("tr",null,[a(_,{class:"text-left"},{default:o(()=>[d("ID")]),_:1}),a(_,null,{default:o(()=>[d("Назначение")]),_:1}),a(_,null,{default:o(()=>[d("Сумма")]),_:1}),a(_,null,{default:o(()=>[d("Кошелек")]),_:1}),a(_,null,{default:o(()=>[d("Дата")]),_:1})])]),default:o(()=>[(s(!0),c(y,null,w(r.transactions,e=>(s(),c("tr",{key:e,class:"main-table__tr"},[e.purchase?(s(),c(y,{key:0},[t("td",le,l(e.id),1),t("td",ae,[t("div",oe,[t("span",null,l(e.purchase.product.brand)+" "+l(e.purchase.product.name),1),t("span",null,"Артикул: "+l(e.purchase.product_id),1),t("span",null,l(I(e.target,e.purchase_id)),1)])]),t("td",ce,l(i(f).format(-e.amount)),1),t("td",de,l(e.wallet_name),1),t("td",ne,l(e.created_ts),1)],64)):h("",!0)]))),128))]),_:1})):r.activeSection=="telegram"?(s(),v(A,{key:1},{head:o(()=>[t("tr",null,[a(_,null,{default:o(()=>[d("ID")]),_:1}),a(_,null,{default:o(()=>[d("Сумма")]),_:1}),a(_,null,{default:o(()=>[d("Назначение")]),_:1}),a(_,null,{default:o(()=>[d("Дата")]),_:1})])]),default:o(()=>[(s(!0),c(y,null,w(r.transactions,e=>(s(),c("tr",{key:e,class:"main-table__tr"},[t("td",ie,l(e.id),1),t("td",ue,l(i(f).format(e.data.bot_data.amount)),1),t("td",re,[t("div",_e,[t("span",null,l(e.purchase.product.brand)+" "+l(e.purchase.product.name),1),t("span",null,"Артикул: "+l(e.purchase.product_id),1),t("span",null,l(I(e.target,e.purchase_id)),1)])]),t("td",pe,l(i(S)(e.created_at).format("D/M/YYYY h:m")),1)]))),128))]),_:1})):i(Y)().isDesktop&&i(k)>390?(s(),v(A,{key:2,class:"transactions-table"},{head:o(()=>[t("tr",null,[a(_,null,{default:o(()=>[d("ID")]),_:1}),a(_,null,{default:o(()=>[d("Сумма")]),_:1}),a(_,null,{default:o(()=>[d("Описание")]),_:1}),a(_,null,{default:o(()=>[d("Тип")]),_:1}),a(_,null,{default:o(()=>[d("Дата")]),_:1}),a(_,null,{default:o(()=>[d("Статус")]),_:1})])]),default:o(()=>[(s(!0),c(y,null,w(r.transactions,e=>(s(),c("tr",{key:e,class:"main-table__tr"},[t("td",fe,l(e.id),1),t("td",me,[e.status==1?(s(),c("span",he,l(e.type==-1?"-":"+")+" "+l(i(f).format(e.amount/100)),1)):e.status==-1?(s(),c("span",ve,l(e.type==-1?"-":"+ ")+" "+l(i(f).format(e.amount/100)),1)):(s(),c("span",ye,l(e.type==-1?"-":"+")+" "+l(i(f).format(e.amount/100)),1))]),t("td",ke,l(F(e.target)),1),t("td",be,[e.type==-1?(s(),c("span",xe,"Списание")):(s(),c("span",ge,"Пополнение"))]),t("td",we,l(i(S)(e.created_ts).format("DD.MM.YYYY"))+" в "+l(i(S)(e.created_ts).format("hh:mm")),1),t("td",Se,[e.status==1?(s(),c("div",Ce,[a(p,{icon:"check-circle",width:"16",height:"16",class:"checkCircle mr-1"}),d(" Выполнено ")])):e.status==-1?(s(),c("div",Ye,[a(p,{icon:"alert-octagon",width:"16",height:"16",class:"alertOctagon mr-1"}),d(" Ошибка выполнения ")])):(s(),c("div",De,[a(p,{icon:"timer",class:"mr-1"}),d("Выполняется ")]))])]))),128))]),_:1})):(s(),c("div",Te,[(s(!0),c(y,null,w(r.transactions,e=>(s(),c("div",{key:"mobile-"+e.id,class:"mobile-product-card"},[t("div",Ae,[e.type===-1?(s(),v(p,{key:0,icon:"minus",class:"mobile-product-card__symbol",fill:e.status<0?"red":e.status>0?"#1665FF":"black"},null,8,["fill"])):h("",!0),e.type===1?(s(),v(p,{key:1,icon:"plus",class:"mobile-product-card__symbol",fill:e.status<0?"red":e.status>0?"#1665FF":"black"},null,8,["fill"])):h("",!0)]),t("div",Me,[t("div",$e,[t("div",Ie,l(i(S)(e.created_ts).format("DD.MM.YYYY")),1),t("div",Fe,l(F(e.target)),1)]),t("div",Ge,[t("div",Re,[e.status==1?(s(),c("span",Be,l(i(f).format(e.amount/100)),1)):e.status==-1?(s(),c("span",Oe,l(i(f).format(e.amount/100)),1)):(s(),c("span",qe,l(i(f).format(e.amount/100)),1))]),t("div",Ne,[e.status==1?(s(),c("div",Ve,[a(p,{icon:"check-circle",width:"16",height:"16",class:"checkCircle mr-1"}),d(" Выполнено ")])):e.status==-1?(s(),c("div",je,[a(p,{icon:"alert-octagon",width:"16",height:"16",class:"alertOctagon mr-1"}),d(" Ошибка выполнения ")])):(s(),c("div",ze,[a(p,{icon:"timer",class:"mr-1"}),d("Выполняется ")]))])])])]))),128))]))]),i(Y)().isDesktop&&i(k)>390?(s(),v(Q,{key:2,links:r.paginator},null,8,["links"])):h("",!0),a(X,{show:b.value,currentSection:m.value,sections:G,onClose:R,onOpen:u[4]||(u[4]=e=>n.disableInput=!0)},null,8,["show","currentSection"])]),_:1})],64))}},ot=P(Le,[["__scopeId","data-v-e0e2798c"]]);export{ot as default};
