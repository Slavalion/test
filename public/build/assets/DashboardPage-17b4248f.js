import{_ as g}from"./AppButton-ffc821ac.js";import{_ as u}from"./AppPanel-d704c47f.js";import{_ as k}from"./CheckboxInput-967d96fa.js";import{_ as v}from"./LabelText-36465a88.js";import{u as w}from"./useAxios-d55f63a8.js";import{_ as j}from"./AuthenticatedLayout-6b95fe5a.js";import{d as D,o as l,c as a,a as n,w as d,u as f,Z as S,b as o,h as e,t as s,g as U,F as c,i as h,j as p}from"./app-632bf8b8.js";import{d as m}from"./dayjs.min-356b711c.js";import"./index-81635579.js";import"./index-4cd942bc.js";import"./Modal-1349d4bc.js";import"./TextInput-7865c9b5.js";import"./SelectInput-944e57c4.js";const N=e("title",null,"Статистика",-1),P={class:"grid gap-8"},Y={class:"grid grid-cols-2 gap-8"},E=e("div",{class:"mb-2 font-bold text-xl"},"Заборы",-1),$={class:"divide-y"},C={class:"flex justify-between py-2"},I=e("div",null,"Всего",-1),q={class:"flex justify-between py-2"},A=e("div",null,"Не обработано",-1),B={class:"flex justify-between py-2"},F=e("div",null,"Забрано",-1),V={class:"flex justify-between py-2"},L=e("div",null,"Не смогли забрать",-1),O=e("div",{class:"mb-2 font-bold text-xl"},"Заборы (загруженные)",-1),R={class:"divide-y"},z={class:"flex justify-between py-2"},G=e("div",null,"Всего",-1),K={class:"flex justify-between py-2"},M=e("div",null,"Не обработано",-1),T={class:"flex justify-between py-2"},Q=e("div",null,"Забрано",-1),Z={class:"flex justify-between py-2"},H=e("div",null,"Не смогли забрать",-1),J=e("div",{class:"mb-2 font-bold text-xl"},"ВЫКУПЫ СКОРО УЕДУТ",-1),W={class:"divide-y"},X={class:"flex justify-between"},ee=e("div",null,"Выкуплен:",-1),te={class:"flex justify-between"},se=e("div",null,"Доступен к забору с:",-1),ie={class:"flex justify-between"},de=e("div",null,"Текущий статус доставки (из выкупа):",-1),le={class:"flex justify-between"},ne=e("div",null,"Текущий статус доставки (из курьерского списка):",-1),ae={class:"flex justify-between"},oe=e("div",null,"Адрес:",-1),ce=e("div",{class:"mb-2 font-bold text-xl"},"Зоны",-1),_e={class:"divide-y"},ue=e("div",{class:"mb-2 font-bold text-xl"},"Курьеры",-1),re={class:"divide-y"},ve={class:"w-56"},fe={class:"flex gap-2"},he={class:"text-gray-500"},pe={class:"text-gray-400 text-xs"},me={class:"px-2"},ye={class:"ml-auto flex gap-2 items-center"},xe=e("span",{class:"text-sm"},'Нажал "Забрано":',-1),be=["href"],qe={__name:"DashboardPage",props:{couriers:{type:Array,required:!0},orders:{type:Array,required:!0},deliveryStats:{type:Object,required:!0},pickUpStats:{type:Object,required:!0},warningDeliveries:{type:Object,required:!0}},setup(i){const y=w(),x=D(),b=r=>{y.post(route("admin.courier.set-preference",{courier:r.id}),{is_active_courier:r.preferences.is_active_courier}).then(()=>{x.success("Статус активности изменен")})};return(r,ge)=>(l(),a(c,null,[n(f(S),null,{default:d(()=>[N]),_:1}),n(j,null,{header:d(()=>[o("Статистика (сегодня)")]),default:d(()=>[e("div",P,[e("div",Y,[n(u,{padding:"lg"},{default:d(()=>[E,e("div",$,[e("div",C,[I,e("div",null,s(i.deliveryStats.total)+" шт.",1)]),e("div",q,[A,e("div",null,s(i.deliveryStats.PENDING)+" шт.",1)]),e("div",B,[F,e("div",null,s(i.deliveryStats.PICKED_UP)+" шт.",1)]),e("div",V,[L,e("div",null,s(i.deliveryStats.FAILURE)+" шт.",1)])])]),_:1}),n(u,{padding:"lg"},{default:d(()=>[O,e("div",R,[e("div",z,[G,e("div",null,s(i.pickUpStats.total)+" шт.",1)]),e("div",K,[M,e("div",null,s(i.pickUpStats.PENDING)+" шт.",1)]),e("div",T,[Q,e("div",null,s(i.pickUpStats.PICKED_UP)+" шт.",1)]),e("div",Z,[H,e("div",null,s(i.pickUpStats.FAILURE)+" шт.",1)])])]),_:1})]),i.warningDeliveries.length>0?(l(),U(u,{key:0,padding:"lg"},{default:d(()=>[J,e("div",W,[(l(!0),a(c,null,h(i.warningDeliveries,t=>(l(),a("div",{key:t.id,class:"py-2"},[e("div",null,"Выкуп #"+s(t.deliveryable.task_id),1),e("div",X,[ee,e("div",null,s(f(m)(t.deliveryable.purchase_at).format("D/M/YYYY hh:mm")),1)]),e("div",te,[se,e("div",null,s(f(m)(t.deliveryable.ready_to_pick_up_at).format("D/M/YYYY hh:mm")),1)]),e("div",ie,[de,e("div",null,s(t.deliveryable.delivery_status),1)]),e("div",le,[ne,e("div",null,[t.picked_up_status==1?(l(),a(c,{key:0},[o(" Забран ")],64)):t.picked_up_status==0?(l(),a(c,{key:1},[o(" Не обработан ")],64)):t.picked_up_status==-1?(l(),a(c,{key:2},[o(" Отсутствует ")],64)):p("",!0)])]),e("div",ae,[oe,e("div",null,s(t.pickpoint_address.address),1)])]))),128))])]),_:1})):p("",!0),n(u,{padding:"lg"},{default:d(()=>[ce,e("div",_e,[(l(!0),a(c,null,h(i.orders,t=>{var _;return l(),a("div",{key:t.id,class:"py-2 flex justify-between"},[e("div",null,s((_=t.pickpoint_zone)==null?void 0:_.name),1),e("div",null,s(t.livecargo_deliveries_count)+" шт.",1)])}),128))])]),_:1}),n(u,{padding:"lg"},{default:d(()=>[ue,e("div",re,[(l(!0),a(c,null,h(i.couriers,t=>(l(),a("div",{key:t.id,class:"py-2 flex items-center gap-4"},[e("div",ve,[e("div",fe,[e("span",he,"#"+s(t.id),1),e("span",null,s(t.name),1)]),e("div",pe,s(t.email),1)]),e("div",me,[n(k,{name:"remember",checked:t.preferences.is_active_courier,"onUpdate:checked":_=>t.preferences.is_active_courier=_,onChange:_=>b(t)},{default:d(()=>[o(" Активен ")]),_:2},1032,["checked","onUpdate:checked","onChange"])]),e("div",ye,[xe,n(v,null,{default:d(()=>[o(" Наши выкупы: "),e("b",null,s(t.total_main_wb_approved),1),o(" | "+s(t.total_main)+" шт. ",1)]),_:2},1024),n(v,null,{default:d(()=>[o(" Загруженные QR коды: "+s(t.total_external)+" шт. ",1)]),_:2},1024),n(v,{theme:"success","no-icon":""},{default:d(()=>[o(" Всего: "+s(t.total_picked_up)+" шт. ",1)]),_:2},1024)]),e("div",null,[e("a",{href:`/admin/courier/${t.id}/download-stat`,download:""},[n(g,{icon:"excel-file",size:"sm",theme:"outline"})],8,be)])]))),128))])]),_:1})])]),_:1})],64))}};export{qe as default};
