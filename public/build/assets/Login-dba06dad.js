import{e as y,T as I,o as d,c as g,a as s,w as t,u as e,Z as z,b as m,t as B,j as _,h as r,B as L,n as u,A as C,g as T,F as q,q as $,s as N}from"./app-632bf8b8.js";import{a as P}from"./index-4cd942bc.js";import{u as U}from"./telegramAuth-3bc65f01.js";import{a as j,b as x,_ as w}from"./AppButton-ffc821ac.js";import{G as E}from"./GuestLayout-9771b318.js";import{_ as F}from"./CheckboxInput-967d96fa.js";import{_ as S}from"./TextInput-7865c9b5.js";const b=l=>($("data-v-a9a47680"),l=l(),N(),l),G=b(()=>r("title",null,"Авторизация",-1)),R={key:0,class:"mb-4 font-medium text-sm text-green-600"},A={key:1,class:"flex justify-center telegram-auth"},D=b(()=>r("span",null,"Войти с помощью Telegram",-1)),H={key:0,class:"pt-9 flex justify-center telegram-auth"},M=b(()=>r("span",null,"Войти с помощью Telegram",-1)),W={__name:"Login",props:{canResetPassword:{type:Boolean},status:{type:String,default:""}},setup(l){const{width:i}=P();y(480);let c=new URLSearchParams(document.location.search).get("ref");c&&localStorage.setItem("refCode",c),c=localStorage.getItem("refCode");const h=y(),p=y(!0);U(h,route("telegram.auth",{refCode:c??0}));const a=I({email:"",password:"",remember:!1}),k=()=>{a.post(route("login"),{onFinish:()=>a.reset("password")})},V=()=>{ym(96168318,"reachGoal","registraciya")},v=()=>{window.Telegram.Login.auth({bot_id:"5428078645",request_access:!0},f=>{console.log(f)})};return(f,o)=>(d(),g(q,null,[s(e(z),null,{default:t(()=>[G]),_:1}),s(E,null,{title:t(()=>[m(" Авторизация ")]),caption:t(()=>[m(" Введите E-mail и пароль ")]),default:t(()=>[l.status?(d(),g("div",R,B(l.status),1)):_("",!0),e(i)<=390?(d(),g("div",A,[r("div",{class:"telegram-btn",onClick:v},[s(x,{icon:"telegramm"}),D]),r("div",{ref_key:"telegram",ref:h,id:"tg-auth-widget",style:{display:"none"}},null,512)])):_("",!0),r("form",{onSubmit:L(k,["prevent"]),class:u(e(i)>390?"space-y-6":"mobile-form")},[s(S,{modelValue:e(a).email,"onUpdate:modelValue":o[0]||(o[0]=n=>e(a).email=n),"has-error":e(a).errors.email!=null,"error-message":e(a).errors.email,label:"E-mail",type:"email",size:"lg",required:"",autofocus:"",autocomplete:"username"},null,8,["modelValue","has-error","error-message"]),s(S,{modelValue:e(a).password,"onUpdate:modelValue":o[1]||(o[1]=n=>e(a).password=n),"has-error":e(a).errors.password!=null,"error-message":e(a).errors.password,label:"Пароль",icon:p.value?"eye":"eyeoff",size:"lg",type:p.value?"password":"text",required:"",autocomplete:"current-password",onClickIcon:o[2]||(o[2]=n=>p.value=!p.value),class:"passInput"},null,8,["modelValue","has-error","error-message","icon","type"]),s(F,{name:"remember",checked:e(a).remember,"onUpdate:checked":o[3]||(o[3]=n=>e(a).remember=n)},{default:t(()=>[m(" Запомнить меня ")]),_:1},8,["checked"])],34)]),footer:t(()=>[r("div",{class:u(e(i)>390?"flex gap-3 auth-panel__footer-btns":"auth-panel-mobile__footer-btns")},[s(e(C),{href:f.route("register"),onClick:V},{default:t(()=>[s(w,{size:"lg",theme:"outline",class:u(e(i)>390?"":"mobileparagraph1")},{default:t(()=>[m(" Регистрация ")]),_:1},8,["class"])]),_:1},8,["href"]),l.canResetPassword?(d(),T(e(C),{key:0,href:f.route("password.request"),class:u(e(i)>390?"ml-auto":"")},{default:t(()=>[s(w,{size:"lg",theme:"normal",class:u(e(i)>390?"":"mobileparagraph1 ")},{default:t(()=>[m(" Забыли пароль ")]),_:1},8,["class"])]),_:1},8,["href","class"])):_("",!0),s(w,{onClick:k,size:"lg",disabled:e(a).processing},{default:t(()=>[m(" Войти ")]),_:1},8,["disabled"])],2),e(i)>390?(d(),g("div",H,[r("div",{class:"telegram-btn",onClick:v},[s(x,{icon:"telegramm"}),M]),r("div",{ref_key:"telegram",ref:h,id:"tg-auth-widget",style:{display:"none"}},null,512)])):_("",!0)]),_:1})],64))}},ae=j(W,[["__scopeId","data-v-a9a47680"]]);export{ae as default};
