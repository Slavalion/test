import{u as k}from"./useAxios-d55f63a8.js";import{d as x,e as d,f as b,o as l,c as n,h as c,F as g,i as j,t as P,a as u,j as w,w as C,b as N}from"./app-632bf8b8.js";import{_ as T}from"./TextInput-7865c9b5.js";import{_ as p}from"./AppButton-ffc821ac.js";import{_ as B}from"./SelectInput-944e57c4.js";const O={class:"panel panel_p-lg"},U=c("div",{class:"text-lg font-bold mb-4"},"Персональные цены",-1),$={class:"space-y-4"},q={class:"flex justify-between"},z={key:0,class:"flex gap-2 items-center justify-end"},F={class:"flex items-center"},S={__name:"PersonalPrices",props:{user:{type:Object,required:!0},prices:{type:Object,required:!0}},setup(_){const m=_,v=x(),f=k(),i={purchase:{name:"Выкуп"},review:{name:"Отзыв"},pick_up:{name:"Забор"}},r=d(m.prices.reduce((s,e)=>[...s,{type:e.type,name:i[e.type].name,value:e.value}],[])),a=b(()=>Object.keys(i).reduce((s,e)=>r.value.find(t=>t.type==e)?s:[...s,{key:e,name:i[e].name}],[])),o=d(a.value[0]),y=()=>{f.post(route("admin.users.set-prices"),{user_id:m.user.id,prices:r.value.reduce((s,e)=>({...s,[e.type]:e.value}),{})}).then(()=>v.success("Цены сохранены"))},h=()=>{r.value.push({type:o.value.key,name:o.value.name,value:0}),a.value.length&&(o.value=a.value[0])};return(s,e)=>(l(),n("div",O,[U,c("div",$,[(l(!0),n(g,null,j(r.value,t=>(l(),n("div",q,[c("div",null,P(t.name),1),u(T,{modelValue:t.value,"onUpdate:modelValue":V=>t.value=V,size:"sm"},null,8,["modelValue","onUpdate:modelValue"])]))),256)),a.value.length?(l(),n("div",z,[u(B,{modelValue:o.value,"onUpdate:modelValue":e[0]||(e[0]=t=>o.value=t),items:a.value},null,8,["modelValue","items"]),u(p,{onClick:h,size:"sm",theme:"normal",icon:"plus-circle"})])):w("",!0),c("div",F,[u(p,{class:"ml-auto",onClick:y},{default:C(()=>[N("Сохранить")]),_:1})])])]))}};export{S as default};
